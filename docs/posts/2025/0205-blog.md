---
title: å…ˆäººã®çŸ¥æµã‚’å€Ÿã‚Šã¾ãã£ã¦Markdownã§æ›¸ã‘ã‚‹ãƒ–ãƒ­ã‚°ã‚’ä½œã‚‹
date: 2025-02-05
description: ã“ã®ãƒ–ãƒ­ã‚°ã®ä½œã‚Šæ–¹
tags: [ "other" ]
---

---

å…ˆäººãŸã¡ã®çŸ¥æµ[^r1][^r2]ã‚’å¤§ã„ã«å€Ÿã‚ŠãªãŒã‚‰ã€ã“ã®ãƒ–ãƒ­ã‚°ã‚’ä½œæˆã—ã€Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸæ™‚ã®ä½œæ¥­è¨˜éŒ²ã€‚
ã¨ã„ã„ã¤ã¤ä½œã£ã¦å¾Œã‹ã‚‰æ›¸ã„ãŸã®ã§ã€æŠœã‘ãŒã‚ã‚‹ã‹ã‚‚ã€‚

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯[Github](https://github.com/bqc0n/blog)ã«ã‚‚ã‚ã‚‹ã®ã§ã€ç´°ã‹ã„ã¨ã“ã‚ã¯ãã¡ã‚‰ã‚’ã€‚

[[toc]]

## å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆæ§˜

- [ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã‚’ VitePress ã¸ç§»è¡Œã—ãŸ](https://nshmura.com/posts/migration-to-vitepress/) - nshmura.com
- [VitePressã§ãƒ–ãƒ­ã‚°ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸ](https://blog.hakuteialpha.com/posts/vitepress-blog/) - blog.hakuteialpha.com

## VitePressã®æº–å‚™

[Getting Started](https://vitepress.dev/guide/getting-started)ã«æ²¿ã£ã¦VitePressã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚

```shell
bun install -D vitepress
```

VitePressã®åˆæœŸè¨­å®šã‚’ã™ã‚‹ã€‚configã‚„mdãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã‚’ç½®ãå ´æ‰€ã¯`./docs`ã«ã—ã¦ã€Titleã¨Descriptionã¯é©å½“ã€ä»–ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã—ãŸã€‚

```shell
bun vitepress init
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
`posts/<year>`ã®ä¸‹ã«ã€`<MMDD-title>.md`ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«ã™ã‚‹ã€‚
```
.
â”œâ”€â”€ docs
â”‚   â”œâ”€â”€ posts
â”‚   â”‚   â”œâ”€â”€ <year>
â”‚   â”‚   â”‚   â”œâ”€â”€ <MMDD-title>.md
â”‚   â”‚   â”‚   â””â”€â”€ ...
```

## Tailwind CSSã‚’å…¥ã‚Œã‚‹

Tailwind CSSã‚’ä½¿ã„ãŸã„ã®ã§å…¥ã‚Œã‚‹ã€‚
ã©ã†ã‚„ã‚‰æœ€è¿‘(2025-1-22)ã«v4.0.0ãŒå‡ºãŸã‚ˆã†ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä½“ç³»ãŒå¤‰ã‚ã£ãŸã½ã„ã€‚
Webåˆå¿ƒè€…ã«ã¯é›£ã—ã‹ã£ãŸã®ã§ä»Šå›ã¯v3ç³»ã‚’ä½¿ã†ã€‚æ™‚é–“ãŒã‚ã‚‹ã¨ãã«å‹‰å¼·ã—ã¦v4ã«ã—ã‚ˆã†ã‹ãªã€‚

```shell
bun install -D tailwindcss@3.4.17 autoprefixer postcss
```

æ¬¡ã«å„ç¨®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã€‚

::: code-group

```js [postcss.config.js]
module.exports = {
    plugins: {
        tailwindcss: {},
        autoprefixer: {},
    },
}
```

```js [tailwind.config.js]
export default {
    content: [
        './docs/index.md',
        './docs/**/*.md',
        './.vitepress/**/*.{js,ts,vue}'
    ],
    theme: {
        extend: {},
    },
    plugins: [],
    important: true,
}
```

:::

::: code-group

```css [.vitepress/theme/custom.css]
@tailwind base;
@tailwind components;
@tailwind utilities;
```

```ts [.vitepress/theme/index.ts]
import DefaultTheme from 'vitepress/theme'
import './custom.css'

export default DefaultTheme
```

:::

ã“ã‚Œã§Tailwind CSSã®å°å…¥ã¯ãŠã‚ã‚Šã€‚

## Markdown-it ã® Pluginã‚’å…¥ã‚Œã‚‹

VitePressã¯Markdown-itä½¿ã£ã¦ã„ã‚‹[^vmit]ã®ã§ã€è‰²ã€…ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦æ©Ÿèƒ½æ‹¡å¼µã§ãã‚‹ã€‚

### Footnote[^markdown-it-footnote]

```sh
bun install -D markdown-it-footnote 
```

`config.mts`ã«ä»¥ä¸‹ã‚’è¿½è¨˜

```ts 
import markdownItFootnote from 'markdown-it-footnote' // [!code ++]

export default defineConfig({
    markdown: { // [!code ++]
        config: (md) => { // [!code ++]
            md.use(markdownItFootnote) // [!code ++]
        } // [!code ++]
    }, // [!code ++]
})
```

### Vitepress Plugin Group Icons[^vpgi]

`::: code-group`ã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã¤ã‘ãŸã‚Šã€`::: code-group`ä»¥å¤–ã§ã‚‚Code Blockã«Title Barã‚’ã¤ã‘ãŸã‚Šã§ãã‚‹ã€‚

```shell
bun install -D vitepress-plugin-group-icons
```

ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€importã—ã¦`md.use`ã™ã‚‹ä»¥å¤–ã«ã‚‚viteã®è¨­å®šã‚„themeã®`index.ts`ã¸ã®è¿½è¨˜ãŒå¿…è¦ã€‚

::: code-group

```ts [.vitepress/config.mts]
import {groupIconMdPlugin, groupIconVitePlugin} from 'vitepress-plugin-group-icons' // [!code ++]

export default defineConfig({
    markdown: {
        config: (md) => {
            md.use(groupIconMdPlugin) // [!code ++]
        }
    },


    vite: { // [!code ++]
        plugins: [ // [!code ++]
            groupIconVitePlugin()  // [!code ++]
        ] // [!code ++]
    }, // [!code ++]
})
```

```ts [.vitepress/theme/index.ts]
import 'virtual:group-icons.css' // [!code ++]
```

:::

## VitePressã®Pluginé”ã‚’å…¥ã‚Œã‚‹

### Git-based page histories

https://nolebase-integrations.ayaka.io/pages/en/integrations/vitepress-plugin-git-changelog/configure-vite-plugins

VitePressã®Configã¨themeã®configä¸¡æ–¹ã‚’ã„ã˜ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

è‡ªåˆ†ã§ä½¿ã†å ´åˆã¯ã€`mapAuthors`ã®ãã‚Œãã‚Œã®é …ç›®ã‚’å¤‰æ›´ã™ã‚‹ã¨è‰¯ã„ã€‚
GitHubã®å ´åˆã€ã‚¢ã‚¤ã‚³ãƒ³ã®ç”ŸURLã¯ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒšãƒ¼ã‚¸ã®ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã‹ã‚‰å–å¾—ã§ãã‚‹ã¯ãšã€‚
ãã®ä»–ãã‚Œãã‚Œã®è¨­å®šã®æ„å‘³ãªã©ã¯[Pluginã®å…¬å¼Document](https://nolebase-integrations.ayaka.io/pages/en/integrations/vitepress-plugin-git-changelog/configure-vite-plugins)ã‚’å‚ç…§ã€‚

```shell
bun install -D @nolebase/vitepress-plugin-git-changelog
```

::: code-group

```ts [.vitepress/config.mts]
import { GitChangelog, GitChangelogMarkdownSection } from '@nolebase/vitepress-plugin-git-changelog/vite' // [!code ++]

export default defineConfig({
    vite: {
        plugins: [
            GitChangelog({ // [!code ++]
                repoURL: () => "https://github.com/bqc0n/blog", // [!code ++]
                mapAuthors: [{ // [!code ++]
                    avatar: "https://avatars.githubusercontent.com/u/89625049?v=4", // [!code ++]
                    name: "bqc0n", username: "bqc0n", // [!code ++]
                    mapByNameAliases: ["bqc0n"], // [!code ++]
                }] // [!code ++]
            }), // [!code ++]
            GitChangelogMarkdownSection({ // [!code ++]
                exclude: (id) => id.endsWith('index.md'), // [!code ++]
            }), // [!code ++]
        ],
    },
})
```

```ts [.vitepress/theme/index.ts]
import DefaultTheme from 'vitepress/theme'
import './custom.css'
import 'virtual:group-icons.css'
import { NolebaseGitChangelogPlugin } from "@nolebase/vitepress-plugin-git-changelog/client" // [!code ++]
import '@nolebase/vitepress-plugin-git-changelog/client/style.css' // [!code ++]

export default DefaultTheme // [!code --]
export default { // [!code ++]
    ...DefaultTheme, // [!code ++]
    enhanceApp({app}) { // [!code ++]
        app.use(NolebaseGitChangelogPlugin) // [!code ++]
    } // [!code ++]
} // [!code ++]
```

:::

### vitepress-plugin-lightbox

https://github.com/BadgerHobbs/vitepress-plugin-lightbox

```shell
bun install -D vitepress-plugin-lightbox
```

ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰æ‹¡å¤§ã™ã‚‹ã‚„ã¤ã€‚

`config.mts`ã¨`theme/index.ts`ã¸ã®è¿½è¨˜ã€`theme/Layout.vue`ã®ä½œæˆãŒå¿…è¦ã€‚

::: code-group
```ts [.vitepress/config.mts]
import lightbox from "vitepress-plugin-lightbox" // [!code ++]
export default defineConfig({
    markdown: {
        config: (md) => {
            md.use(lightbox) // [!code ++]
        }
    },
})
```

```ts [.vitepress/theme/index.ts]
import Layout from "./Layout.vue"; // [!code ++]

export default {
    ...DefaultTheme,
    Layout, // [!code ++]
}
```

```vue [.vitepress/theme/Layout.vue]
<script setup>
import DefaultTheme from "vitepress/theme";
import { onMounted } from "vue";
import { useRouter } from "vitepress";
import mediumZoom from "medium-zoom";

const { Layout } = DefaultTheme;
const router = useRouter();

// Setup medium zoom with the desired options
const setupMediumZoom = () => {
  mediumZoom("[data-zoomable]", {
    background: "transparent",
  });
};

// Apply medium zoom on load
onMounted(setupMediumZoom);

// Subscribe to route changes to re-apply medium zoom effect
router.onAfterRouteChanged = setupMediumZoom;
</script>

<template>
  <Layout />
</template>

<style>
.medium-zoom-overlay {
  backdrop-filter: blur(5rem);
}

.medium-zoom-overlay,
.medium-zoom-image--opened {
  z-index: 999;
}
</style>
```
:::

### Giscus

https://giscus.app/ja

GitHub Discussionsã‚’åˆ©ç”¨ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã€‚åˆ©ç”¨ã™ã‚‹ã«ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªãŒPublicã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ³¨æ„ã€‚

#### GitHub Discussionsã®æœ‰åŠ¹åŒ–
[ã“ã®ã‚¬ã‚¤ãƒ‰](https://docs.github.com/ja/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/enabling-or-disabling-github-discussions-for-a-repository)ã«å¾“ã£ã¦ãƒªãƒã‚¸ãƒˆãƒªã®Discussionsã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚

#### Giscus Appã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
https://github.com/apps/giscus ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

#### vitepress-plugin-comment-with-giscusã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
https://giscus.app/ja ã§è¨­å®šã™ã¹ãé …ç›®ã®å†…å®¹ã‚’å–å¾—ã§ãã‚‹ã€‚
```shell
bun install -D vitepress-plugin-comment-with-giscus
```

`theme/index.ts`ã«è¿½è¨˜

```ts [.vitepress/theme/index.ts]
import giscusTalk from 'vitepress-plugin-comment-with-giscus'; // [!code ++]
import { useData, useRoute } from 'vitepress'; // [!code ++]
import { toRefs } from "vue"; // [!code ++]

export default {
    // ...
    setup() { // [!code ++]
        const { frontmatter } = toRefs(useData()); // [!code ++]
        const route = useRoute(); // [!code ++]
        giscusTalk({ // [!code ++]
                repo: 'bqc0n/blog', // [!code ++]
                repoId: 'R_kgDONyqpCg', // [!code ++]
                category: 'Announcements', // [!code ++]
                categoryId: 'DIC_kwDONyqpCs4Cmvcv', // [!code ++]
                mapping: 'title', // [!code ++]
                inputPosition: 'top', // [!code ++]
                lang: 'jp', // [!code ++]
                locales: { // [!code ++]
                    'ja-JP': 'ja', // [!code ++]
                    'en-US': 'en' // [!code ++]
                }, // [!code ++]
                homePageShowComment: false, // [!code ++]
                lightTheme: 'light', // [!code ++]
                darkTheme: 'transparent_dark', // [!code ++]
            }, { // [!code ++]
                frontmatter, route // [!code ++]
            }, // [!code ++]
            true, // [!code ++]
        ); // [!code ++]
    } // [!code ++]
}
```

## `config.mts`ã§è¿½åŠ ã®è¨­å®š

- `lastUpdated: true`: ãƒšãƒ¼ã‚¸ã®ä¸‹ã«ã¡ã£ã¡ã‚ƒãæœ€çµ‚æ›´æ–°æ—¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- `cleanUrls: true`: URLæœ«å°¾ã®`.html`ãŒæ¶ˆãˆã‚‹ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«ã‚ˆã£ã¦ã¯è¿½åŠ ã®è¨­å®šãŒå¿…è¦ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ä»Šå›ã¯ãã®ã¾ã¾ã§å‹•ã„ã¦ãã‚ŒãŸã€‚

## ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ä½œæˆ

ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ã¯è¨˜äº‹ä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸã„ã®ã§ã€ã¾ãšè¨˜äº‹ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«[Build-Time Data Loading](https://vitepress.dev/guide/data-loading)ã¨ã„ã†æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã€‚

```ts [.vitepress/posts.data.mts]
import { createContentLoader } from 'vitepress';

export default createContentLoader('posts/*/*.md', {
    includeSrc: false,
    transform(rawData) {
        return rawData
            .filter(page => page.url != "/posts/")
            .sort((a, b) => +new Date(b.frontmatter.date) - +new Date(a.frontmatter.date) )
    }
});
```

ã¾ãŸ`custom.css`ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã€‚
```shell
.home-posts-article {
    border-top: 1px solid var(--vp-c-divider);
    padding: 10px 0;
}
```

momentã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
```shell
bun install -D moment
```

ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã€‚
```md
---
title: Home
layout: doc
next: false
prev: false
---

<script setup>
import { data as posts } from '.vitepress/posts.data.mts';
import moment from 'moment';
</script>

# blog.bqc0n.com

å€‹äººçš„ãªå‚™å¿˜éŒ²é›†ã§ã™ã€‚è¨˜äº‹ã®å†…å®¹ã¯ã€[MIT-License](https://github.com/bqc0n/blog/blob/main/LICENSE)ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

<article v-for="post of posts" class="home-posts-article">
  <a :href="post.url" class="block text-inherit no-underline hover:underline">
    <p class="text-2xl">{{ post.frontmatter.title }}</p>
    <p class="text-sm text-gray-500">{{ moment(post.frontmatter.date).format('YYYY-MM-DD') }}</p>
    <p>{{ post.frontmatter.description }}</p>
  </a>   
</article>
```

## è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ
ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¨åŒã˜ã‚ˆã†ã«è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚‚ä½œã‚‹ã€‚

```md
---
title: Posts | blog.bqc0n.com
layout: doc
next: false
prev: false
---
<script lang="ts" setup>
import { data as posts } from "../.vitepress/posts.data"
import moment from 'moment';
</script>

# è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ

<ul>
    <li v-for="post of posts">
        <a :href="post.url" class="font-semibold text-lg">{{ post.frontmatter.title }}</a>
        <span class="text-sm"> - {{ moment(post.frontmatter.date).format('YYYY-MM-DD') }}</span>
    </li>
</ul>
```
ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã€‚
![blog-posts-preview](./0205-blog-posts.png)

## ã‚¿ã‚°ãƒšãƒ¼ã‚¸ã®ä½œæˆ

[Dynamic Routes](https://vitepress.dev/guide/routing#dynamic-routes)ã‚’ä½¿ã£ã¦ã€buildæ™‚ã«ã‚¿ã‚°ãƒšãƒ¼ã‚¸ã‚’å‹•çš„ã«ä½œæˆã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

Dynamic Routesã¯ã€`[placeholder].md`ã®ã‚ˆã†ã«`[]`ã‚’åå‰ã«å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹ã“ã¨ã§ã€
`placeholder`ã«æ–‡å­—åˆ—ã‚’ä»£å…¥ã—ã¦å‹•çš„ã«ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã§ãã‚‹æ©Ÿèƒ½ã§ã‚ã‚‹ã€‚

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ã“ã®ã‚ˆã†ã«ã™ã‚‹ã€‚
```
docs
â””â”€â”€ tags
    â”œâ”€â”€ [tag]
    â”‚   â”œâ”€â”€ index.md
    â”‚   â””â”€â”€ index.paths.js
    â””â”€â”€ index.md
```

æ¬¡ã«placeholderã«ä»£å…¥ã•ã‚Œã‚‹æ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹ Paths Loader File ã‚’ä½œæˆã™ã‚‹ã€‚
`tag:`ãŒ`[tag]`ã«ä»£å…¥ã•ã‚Œã‚‹æ–‡å­—åˆ—ã§ã‚ã‚‹ã€‚`content:`ã¯mdãƒ•ã‚¡ã‚¤ãƒ«ã®`<!-- @content -->`ã«å±•é–‹ã•ã‚Œã‚‹æ–‡å­—åˆ—ã§ã€ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦
ãƒšãƒ¼ã‚¸ã®å†…å®¹ã‚’å‹•çš„ã«å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
```js 
import fs from 'fs'
import { globSync } from 'glob'

var tags = {}

var files = globSync("docs/posts/**/*.md");

files.forEach(file => {
    var data = fs.readFileSync(file, 'utf8');
    var found = data.match(/^tags:\s*\[(.+)]\s*$/m)
    if (found) {
        found[1].split(",")
            .map(tag => tag.replaceAll('"', '') )
            .forEach(tag => tags[tag.replaceAll(' ', '')] = tag )
    }
});

export default {
    paths: () => {
        return Object.keys(tags).map((key) => {
            return { params: { tag: key }, content: `# ã‚¿ã‚°: ${tags[key]}`}
        })
    }
}
```

`[tag]/index.md`ã‚‚ä½œæˆ
```md
---
next: false
prev: false
---

<script setup>
import { useData } from 'vitepress'
import { data as posts } from '../../.vitepress/posts.data.mts'

const { params } = useData()
const current_tag = params.value.tag

var pages = []
posts.forEach(post => {
    if (post.frontmatter.tags){
        var tags = post.frontmatter.tags.map(tag => tag.replaceAll(" ", "") )
        if (tags.includes(current_tag)) pages.push(post) 
    }
})

</script>

<!-- @content -->

<ul>
  <li v-for="page of pages">
    <a :href="page.url">{{ page.frontmatter.title }}</a>
  </li>
</ul>
```
ã“ã‚Œã§ã‚¿ã‚°ãƒšãƒ¼ã‚¸ã®ä½œæˆã‚‚å®Œäº†ã€‚

## å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼

è¨˜äº‹ã®æŠ•ç¨¿æ—¥ã€æœ€çµ‚æ›´æ–°æ—¥ã€ä»˜ã‘ã‚‰ã‚ŒãŸã‚¿ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

::: code-group
```vue [.vitepress/theme/PostHeader.vue]
<script setup>
  import { useData } from 'vitepress'
  import moment from 'moment';

  const { frontmatter } = useData()
  const lastUpdated = moment(useData().page.value.lastUpdated).format('YYYY-MM-DD');
  const date = moment(frontmatter.value.date).format('YYYY-MM-DD');
</script>

<template>
  <div class="vp-doc">
    <p>
      <span>ğŸ“… {{ date }}</span> | <span>ğŸ”„ {{ lastUpdated }}</span>
    </p>
    <h1>{{ frontmatter.title }}</h1>
    <p>
      <a v-for="tag in frontmatter.tags" :href="'/tags/' + encodeURIComponent(tag.replaceAll(' ', '')) + '/'"> #{{ tag }} </a>
    </p>
  </div>
</template>
```

```vue [.vitepress/theme/Layout.vue]
<script setup>
// ...  
import {useRouter} from "vitepress"; // [!code --]
import {useData, useRouter} from "vitepress"; // [!code ++]
import PostHeader from "./PostHeader.vue"; // [!code ++]
// ...
</script>

<template>
  <Layout /> <!-- [!code --] -->
  <Layout>  <!-- [!code ++] -->
    <template #doc-before> <!-- [!code ++] -->
      <PostHeader /> <!-- [!code ++] -->
    </template> <!-- [!code ++] -->
  </Layout> <!-- [!code ++] -->
</template>
```

:::

## ãƒ‡ãƒ—ãƒ­ã‚¤
ã“ã“ã¾ã§å‡ºæ¥ãŸã‚‰ã€ã„ã‚ˆã„ã‚ˆCloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚

::: info
Cloudflare Dashboardã®ä»•æ§˜ã¯ã‚ˆãå¤‰ã‚ã‚‹ã®ã§ã€ãã®æ™‚ã¯éƒ½åº¦èª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚
:::

GitHubã¨ã®é€£æºã¯æ¸ˆã¾ã›ã¦ã‚ã‚‹å‰æã¨ã™ã‚‹ã€‚

[Cloudflare Dashboard](https://dash.cloudflare.com/)ã‹ã‚‰ã€Workersã‚’é¸æŠã—ã¦ã€å³ä¸Šã®ä½œæˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚

blogã®ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠã™ã‚‹ã¨ã€æ§˜ã€…ãªé …ç›®ã‚’å…¥åŠ›ã™ã‚‹ç”»é¢ã«é·ç§»ã™ã‚‹ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¨ãƒ–ãƒ©ãƒ³ãƒã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹ã€‚
ã¾ãŸãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã«ã¯`bun run docs:build`ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰ã«ã¯`bunx wrangler deploy --assets ./docs/.vitepress/dist/ --name blog --compatibility-date 2025-02-04`ã‚’è¨­å®šã™ã‚‹ã€‚
![cloudflare-pages-deploy](./0205-blog-cf-pages.png)

æ¬¡ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®šã‚’ã™ã‚‹ã€‚
Pagesã‹ã‚‰blogã®è©³ç´°ãƒšãƒ¼ã‚¸ã«è¡Œã£ãŸã‚‰ã€è¨­å®šã‚¿ãƒ–ã«ç§»å‹•ã™ã‚‹ã€‚
![cloudflare-pages-domain](./0205-blog-cf-domain.png)
å³ä¸Šã®è¿½åŠ ã‚’æŠ¼ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠã—ã¦è¨­å®šã™ã‚‹ã€‚
![cloudflare-pages-domain](./0205-blog-cf-domain-2.png)

ä»¥ä¸Šã§ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã§ã€ãƒ–ãƒ­ã‚°å®Œæˆã€‚

## TODO
- æŠ•ç¨¿æ—¥ã¨æœ€çµ‚æ›´æ–°æ—¥ã€ã¤ã„ã¦ã„ã‚‹ã‚¿ã‚°ã‚’è¨˜äº‹ã®æœ€åˆã«è¡¨ç¤ºã™ã‚‹

[^r1]: https://nshmura.com/posts/migration-to-vitepress/
[^r2]: https://blog.hakuteialpha.com/posts/vitepress-blog/
[^vmit]: https://vitepress.dev/guide/markdown#advanced-configuration
[^vpgi]: https://vpgi.vercel.app
[^markdown-it-footnote]: https://github.com/markdown-it/markdown-it-footnote