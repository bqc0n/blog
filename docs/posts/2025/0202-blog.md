---
title: (TODO WIP) 先人の知恵を借りまくってMarkdownで書けるブログを作る
date: 2025-02-02
description: TBD
tags: [ "other" ]
---

# 先人の知恵を借りまくってMarkdownで書けるブログを作る

このブログを作成した時の作業記録。
ソースコードは[Github](https://github.com/bqc0n/blog)にもあるので、細かいところはそちらを。

[[toc]]

## VitePressの準備

[Getting Started](https://vitepress.dev/guide/getting-started)に沿ってVitePressをセットアップする。

```shell
bun install -D vitepress
```

VitePressの初期設定をする。configを置く場所は`./docs`にして、TitleとDescriptionは適当、他はデフォルトにした。

```shell
bun vitepress init
```

## カスタマイズ

### Tailwind CSSを入れる

Tailwind CSSを使いたいので入れる。
どうやら最近(2025-1-22)にv4.0.0が出たようで、インストール体系が変わったぽい。
Web初心者には難しかったので今回はv3系を使う。時間があるときに勉強してv4にしようかな。

```shell
bun install -D tailwindcss@3.4.17 autoprefixer postcss
```

次に各種設定ファイルを書く。

::: code-group

```js [postcss.config.js]
module.exports = {
    plugins: {
        tailwindcss: {},
        autoprefixer: {},
    },
}
```

```js [tailwind.config.js]
export default {
    content: [
        './docs/index.md',
        './docs/**/*.md',
        './.vitepress/**/*.{js,ts,vue}'
    ],
    theme: {
        extend: {},
    },
    plugins: [],
    important: true,
}
```

:::

::: code-group

```css [.vitepress/theme/tailwind.css]
@tailwind base;
@tailwind components;
@tailwind utilities;
```

```ts [.vitepress/theme/index.ts]
import DefaultTheme from 'vitepress/theme'
import './tailwind.css'

export default DefaultTheme
```

:::

これでTailwind CSSの導入はおわり。

### Markdown-it の Pluginを入れる

VitePressはMarkdown-it使っている[^vmit]ので、色々なプラグインを入れて機能拡張できる。

#### Footnote^[^markdown-it-footnote]

```sh
bun install -D markdown-it-footnote 
```

`config.mts`に以下を追記

```ts 
import markdownItFootnote from 'markdown-it-footnote' // [!code ++]

export default defineConfig({
    markdown: { // [!code ++]
        config: (md) => { // [!code ++]
            md.use(markdownItFootnote) // [!code ++]
        } // [!code ++]
    }, // [!code ++]
}
```

#### Vitepress Plugin Group Icons[^vpgi]

`::: code-group`にアイコンをつけたり、`::: code-group`以外でもCode BlockにTitle Barをつけたりできる。

```shell
bun install -D vitepress-plugin-group-icons
```

importして`md.use`するところまではFootnoteと同じだが、これはviteとthemeの`index.ts`にも設定が必要。

::: code-group

```ts
import {groupIconMdPlugin, groupIconVitePlugin} from 'vitepress-plugin-group-icons'

export default defineConfig({
    markdown: {
        config: (md) => {
            md.use(groupIconMdPlugin) // [!code ++]
        }
    },
}
```

:::

### `config.mts`で追加の設定

- `lastUpdated: true`: ページの下にちっちゃく最終更新日が表示される
- `cleanUrls: true`: URL末尾の`.html`が消える。デプロイ先によっては追加の設定が必要かもしれないが、今回はそのままで動いてくれた。

[^vmit]: https://vitepress.dev/guide/markdown#advanced-configuration

[^vpgi]: https://vpgi.vercel.app
[^markdown-it-footnote] https://github.com/markdown-it/markdown-it-footnote